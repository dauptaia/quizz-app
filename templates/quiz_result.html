<!DOCTYPE html>
<html>

<head>
    <title>{{ quiz.quiz.title }} - Results</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>

<body class="container py-4">
    <h1>Results for {{ quiz.quiz.title }}</h1>
    <p>Your score: <b>{{ score }}/{{ quiz.questions|length }}</b></p>

    <h2>Review</h2>
    <ul class="list-group">
        {% for q, ans in qa_pairs %}
        {% set student_ans = ans[1]|int if ans[1] else "None" %}
        {% set correct_ans = q.correct %}
        <li class="list-group-item">
            <b>{{ q.id }}. {{ q.text }}</b>
            {% if student_ans is not none %}
            {% if student_ans == correct_ans %}
            ✅
            {% else %}
            ❌
            {% endif %}
            {% else %}
            ❌
            {% endif %}
            <br>
            Your answer: {{ q.options[student_ans] }}<br>
            Correct answer: {{ q.options[correct_ans] }}<br>
            Confidence: {{ ans[2] }}%
        </li>
        {% endfor %}
    </ul>

    <a href="{{ url_for('student_home') }}" class="btn btn-primary mt-3">Back to quizzes</a>
</body>

</html>