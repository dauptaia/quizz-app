<!DOCTYPE html>
<html>

<head>
    <title>{{ quiz.quiz.title }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>

<body class="container py-4">
    <h1>{{ quiz.quiz.title }}</h1>
    <form method="post" id="quiz-form">
        <label for="token">Your token:</label>
        <input type="text" name="token" id="token" value="{{ token or '' }}" required>

        {% if error %}
        <p style="color:red;">{{ error }}</p>
        {% endif %}

        {% for q in quiz.questions %}
        {% set i = loop.index0 %}
        <hr>
        <fieldset>
            <!-- <legend>{{ q.question }}</legend> -->
            <p><b>{{ q.id }}. {{ q.text }}</b></p>
            <!-- multiple choice answers -->
            {% for option in q.options %}
            {% set j = loop.index0 %}
            <label>
                <input type="radio" name="q{{ i }}" value="{{ j }}" {% if answers and answers[i] is not none and
                    answers[i]|int==j %}checked{% endif %} {% if loop.first %}required{% endif %}>
                {{ option }}
            </label><br>
            {% endfor %}

            <!-- confidence slider -->
            <label for="c{{ i }}">Confidence (0% random guess - 100% absolutely sure):</label><br>
            <input type="range" min="0" max="100" step="10" name="c{{ i }}" id="c{{ i }}"
                value="{{ confidence[i] if confidence and confidence[i] is not none else 50 }}"
                oninput="document.getElementById('out{{ i }}').value = this.value">
            <output id="out{{ i }}">{{ confidence[i] if confidence and confidence[i] is not none else 50 }}</output>%

        </fieldset>
        <hr>
        {% endfor %}
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</body>

</html>